<?PHP
//[Title] Configuración base de datos y varios
//[HELP] sql.ini


// control del espacio, se define también en el multitenan
	//$_CNTFREEDISKSPACE = false;
	//$_CNTDISKSPACE = 10;			// Gigas
	//$_CNTDIR = '';


// Base de datos

	$_IntranetPrefix = '';

	$_SqlExHostName = '';			//HostName servidor de extracciones
	$_SqlExUsuario = '';			//Usuario servidor de extracciones
	$_SqlExPassword = '';			//Password servidor de extracciones
	$_SqlExDiccionario = '';		//Diccionario servidor de extracciones

	$_Estadistica = true;			//Estadística

	$_DownloadUrl	= '';			//URL para ejecutar la descarga en segundo plano
	$_DownloadPath	= '';			//Directorio donde se graban las descargas, por defecto "/_tmp/exp"
	$_DownloadFile	= '';			//URL para la descarga de ficheros
	$_DownloadDays	= 30;			//Tiempo que permanecen vivas las descargas
	$_DownloadDelete = 5*365;		//5 años

	$_En2Plano		= false;		//Extracciones en segundo plano

	$_CacheSrv = false;
	$_CachePc = '23:58:58';			//HH:MM:SS hasta que hora dura la cache

	$_ErrImg = true;				//Se manda una copia de pantalla en caso de error
	$_ErrReportTo = '';				//Reportar todos los errores por correo
	$_ErrReportToDev = '';			//Reportar error de los Usuarios/Nodos definidos en $_ErrReportUserNode
	$_ErrReportMessage = $GLOBALS["_Empresa"].' - ERROR';

	//if( !empty($ _ ENV[SESS]["db_path"]) ){
	//	$_SqlHostName	 = $ _ ENV[SESS]["db_hostname"];
	//	$_SqlDiccionario = $ _ ENV[SESS]["db_dictionary"];
	//	$_SqlUsuario	 = $ _ ENV[SESS]["db_user"];
	//	$_SqlPassword	 = $ _ ENV[SESS]["dt_password"];
	//}

	$_Sql = '[SQL]';				//Gestor de Base de Datos
	$_SqlPDOType = '';				//Tipo de Base de Datos cuendo es PDO
	$_SqlInit = array("SET SESSION sql_mode=''", "SET NAMES utf8mb4");
	$_SqlTransaction = true;			// DDBB con transacciones


$HTTPServer = $_SERVER['HTTP_HOST'];
if( class_exists('SESS') && !empty(SESS::$_SP_) && SESS::$_SP_=='production' ){
	$HTTPServer = 'production';
}

[PUTENV]

switch( $HTTPServer ){		// Configuración según servidor

	case '[PROCESOS]':	//PROCESOS
	case 'production':
		$_IntranetPrefix = '';

		$_SqlTransaction = false;		//DDBB con transacciones
		$_SqlHostName = '[HOSTDB]';		//HostName
		$_SqlUsuario = '[USUARIO]';		//Usuario
		$_SqlPassword = '[PASSWORD]';		//Password
		$_SqlDiccionario = '[DICCIONARIO]';		//Diccionario
		$_SqlPDOConnect = '';			// Cadena de conexión para PDO
		//$_SqlOwner = '';		// Oracle: Si el propietario de la tabla es distinto del usuario

		$_SqlExHostName = '';		//HostName servidor de extracciones
		$_SqlExUsuario = '';		//Usuario servidor de extracciones
		$_SqlExPassword = '';		//Password servidor de extracciones
		$_SqlExDiccionario = '';		//Diccionario servidor de extracciones

		$_Estadistica = true;		//Estadistica
		$_Development = false;		//Desarrollo

		$_DownloadUrl	= '';		//URL para ejecutar la descarga en segundo plano
		$_DownloadPath	= '';		//Directorio donde se graban las descargas, por defecto "/_tmp/exp"
		$_DownloadFile	= '';				//URL para la descarga de ficheros
		$_DownloadDays	= 30;		//Tiempo que permanecen vivas las descargas
		$_DownloadDelete = 5*365;		// 5 años

		$_En2Plano		= false;		//Extracciones en segundo plano
		$_CacheSrv = false;
		$_CachePc = '23:58:58';		//HH:MM:SS hasta que hora dura la cache
		break;

	case '[IP]':	//DESARROLLO
		$_IntranetPrefix = 'Desarrollo';		//Identificador de aplicación de desarrollo

		$_SqlTransaction = false;		//DDBB con transacciones
		$_SqlHostName = '[HOSTDB]';		//HostName
		$_SqlUsuario = '[USUARIO]';		//Usuario
		$_SqlPassword = '[PASSWORD]';		//Password
		$_SqlDiccionario = '[DICCIONARIO]';		//Diccionario
		$_SqlPDOConnect = '';			// Cadena de conexión para PDO
		//$_SqlOwner = '';		// Oracle: Si el propietario de la tabla es distinto del usuario

		$_SqlExHostName = '';		//HostName servidor de extracciones
		$_SqlExUsuario = '';		//Usuario servidor de extracciones
		$_SqlExPassword = '';		//Password servidor de extracciones
		$_SqlExDiccionario = '';		//Diccionario servidor de extracciones

		$_Estadistica = true;		//Estadistica
		$_Development = true;		//Desarrollo

		$_DownloadUrl	= '';		//URL para ejecutar la descarga en segundo plano
		$_DownloadPath	= '';		//Directorio donde se graban las descargas, por defecto "/_tmp/exp"
		$_DownloadFile	= '';				//URL para la descarga de ficheros
		$_DownloadDays	= 30;		//Tiempo que permanecen vivas las descargas
		$_DownloadDelete = 5*365;		// 5 años

		$_En2Plano		= false;		//Extracciones en segundo plano
		$_CacheSrv = false;
		$_CachePc = '';		//HH:MM:SS hasta que hora dura la cache
		break;

	default:
		if( $HTTPServer!='' ){
			$txt = 'HTTP_HOST "'.$_SERVER['HTTP_HOST'].'" no configurado en "sql.ini"';
			eTron($txt);
			die($txt);
		}

		// HOSTNAME en Background
		if( php_uname('n')=='...' ){				// PROCESOS
			$_SqlTransaction = false;				// DDBB con transacciones
			$_SqlHostName = '[HOSTDB]';				// HostName
			$_SqlUsuario = '[USUARIO]';				// Usuario
			$_SqlPassword = '[PASSWORD]';			// Password
			$_SqlDiccionario = '[DICCIONARIO]';		// Diccionario
			$_SqlPDOConnect = "";					// Cadena de conexión para PDO
		}else if( php_uname('n')=='...' ){		// DESARROLLO
			$_SqlTransaction = false;				// DDBB con transacciones
			$_SqlHostName = '[HOSTDB]';				// HostName
			$_SqlUsuario = '[USUARIO]';				// Usuario
			$_SqlPassword = '[PASSWORD]';			// Password
			$_SqlDiccionario = '[DICCIONARIO]';		// Diccionario
			$_SqlPDOConnect = "";					// Cadena de conexión para PDO
		}else{
			$txt = 'HOSTNAME en Background "'.php_uname('n').'" no configurado en "sql.ini"';
			eTron($txt);
			die($txt);
		}
}
?>