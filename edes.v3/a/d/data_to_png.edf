[Title]InformaciÃ³n en un PNG
[AddCode]*|data|I|style="font-family:monospace"
[AddOption]*|type|C,Client; S,Server
[Fields]
|data|#|A|5000,110,20||M||#|
Type|type|#|SV|30||M|||
[PHPStart]A
if( $_GET["type"]=="C" ){
copy(DIREDES."a/seek.gif", "../seek.gif");
$img = "seek";
}else{
copy(DIREDES."a/users.png", "../users.png");
$img = "user";
}
@unlink("../{$img}.png");
copy(DIREDES."a/{$img}.png" , "../{$img}.png");
$file = file_get_contents("../{$img}.png");
$data = trim($_POST["data"]);
$data = eEntityDecode($data);
$data = str_replace('&#13;' , chr(13), $data);
$data = str_replace('&#10;' , chr(10), $data);
$data = str_replace('&quot;',    '"' , $data);
$data = gzcompress($data, 9);
$leng = str_pad( dechex(strlen($data)), 3, "0", STR_PAD_LEFT );
eval($data);
ePrintR($apiKey);
file_put_contents("../{$img}.png", $file.$data.$leng);
$url = $apiKey["url"];
$file_path = "../_tmp/php/unload.api";
$res = eCurl($url, array(
"authorization"=> $actionKey["restore"]
,"action"		=> "restore"
,"records"		=> "1/30"
,"file"			=> $file_path
,"restore"		=> curl_file_create($file_path, mime_content_type($file_path), basename($file_path))
));
eMessage('Los datos se han encriptado en "../'.$img.'.png"', "HS");