#include(*) $lng/usu_clave.edf.lng
[Title]=PASSWORD DEVELOPMENT
[Button]a|[setup] Develop
[Fields]
|pass|#|P|60|220|M||'#'.length>=@|@LongitudMinima@
Â¿ file_exists("../tree/__personal.".SESS::$_UserEMail) ? <Load TreePersonal|TreePersonal|#|C|1||M|||
[JSCheck]a
if( _ErrMensaje=='' ){
document.cookie = "eDesPassword="+document.FRM1.pass.value+";max-age="+(60*60*24*30)+";";
}
[JSEnd]a
if( S.is("eDesPassword=", document.cookie) ){
ePF("pass", S.mid(document.cookie+";", "eDesPassword=",";"));
setTimeout(function(){eSubmit();}, 100);
}
[JSIni]a
S(window).windowColor("#bd454b", "#ffffff", "#ec8084", "#ffffff");
[DBIni]A
include(eScript('$t/lp.gs'));
if( isset(SESS::$_gsACCESO['EMAIL']) ){
qQuery("select user_name from {$_ENV['eDesDictionary']}gs_user where cd_gs_user=".SESS::$_User);
list($nmUser) = qRow();
LeerLP(SESS::$_gsACCESO['EMAIL'], $_POST['pass'], $_gsMaster, $NumBak, $nmUser);
}else{
qQuery("select user_name from {$_ENV['eDesDictionary']}gs_user where cd_gs_user=".S::$_User);
list($nmUser) = qRow();
LeerLP(SESS::$_UserEMail, $_POST['pass'], $_gsMaster, $NumBak, $nmUser);
}
qFree();
SESS::$_Development = ($_gsMaster!='');
if( $_gsMaster!='' ){
SESS::$_D_ = $_gsMaster;
SESS::$_P_ = $_POST['pass'];
SESS::$_L_ = SESS::$_gsACCESO['LOGIN'];
if( SESS::$_gsACCESO['LOGEAR'] ) gsLogear('FW', 'S', '');
if( SESS::$_gsACCESO['ACCESO']>=1 && SESS::$_gsACCESO['Edit']>=1 ){
include(DIREDES."t/developer.js");
eContextPut('E:$t/development.js');
eContextPut('E:$t/create_css.php');
eContextPut('E:$t/create_css_ini.php');
}
if( file_exists("../_d_/{$_User}.dvl") ){
include("../_d_/{$_User}.dvl");
SESS::$_gsDirAccess = $_gsDirAccess;
}
$cargar = "";
if( $_POST["TreePersonal"]==$_ENV['ON'] ) $cargar .= 'document.cookie="eDesTreePersonal=S;max-age='.(60*60*24*30).';";';
if( $_gsMaster=="~" ) 			  		  $cargar .= 'document.cookie="eDesTreeSystem=S;max-age='.(60*60*24*30).';";';
$dimLanguage = "";
if( qCount("{$_ENV['eDesDictionary']}gs_language", "tf_translation='{$_ENV['ON']}'")>1 ){
$dimLanguage = "if(S('#arSTOOLS',top).length>0){S('#eIDIOMA','#arSTOOLS',top).text('".SESS::$_LANGUAGE_."'); S('#eIDIOMA','#arSTOOLS',top).block('table-cell');} top['_DimLanguage']=[['-Idioma']";
qQuery("select * from {$_ENV['eDesDictionary']}gs_language where tf_translation='{$_ENV['ON']}' order by nm_gs_language");
while($r=qArray()){
$dimLanguage .= ",['{$r['nm_gs_language']}','','{$r['cd_gs_language']}'";
if( $r['cd_gs_language']==SESS::$_LANGUAGE_ ){
$dimLanguage .= ",null,null,'font-weight:bold']";
}else{
$dimLanguage .= ",null,null,null]";
}
}
$dimLanguage .= "];";
}
$para = filemtime(DIREDES.'t/developer.js');
eMessage("Active Development", "HSC", 0, $dimLanguage.'S.script(top,"$t/developer.js&j='.$para.'");'.$cargar);
}else{
eMessage("No Development", "HSC", 0);
}
[Sanitize]
LoginPC = int
LoginSRV = int
[CallSrv]LoginPC
eInit();
if( $_GET["LoginPC"]!="34" ){
}else{
include(DIREDES.'_e.js');
echo "\n";
?>
S.call("edes.php?E:CallSrv=$a/d/development.edf&LoginSRV=43", {
pass:_e_(
S.mid(
document.cookie+";"
,"eDesPassword="
,";"
)
).toUpperCase()
});
<?PHP
}
eEnd();
[CallSrv]LoginSRV
eInit();
if( $_GET["LoginSRV"]!="43" ){
}else{
include(eScript('$t/lp.gs'));
if( isset(SESS::$_gsACCESO['EMAIL']) ){
qQuery("select user_name from {$_ENV['eDesDictionary']}gs_user where cd_gs_user=".SESS::$_User);
list($nmUser) = qRow();
LeerLP(SESS::$_gsACCESO['EMAIL'], $_POST['pass'], $_gsMaster, $NumBak, $nmUser);
}else{
qQuery("select user_name from {$_ENV['eDesDictionary']}gs_user where cd_gs_user=".S::$_User);
list($nmUser) = qRow();
LeerLP(SESS::$_UserEMail, $_POST['pass'], $_gsMaster, $NumBak, $nmUser);
}
qFree();
if( $_gsMaster!='' ){
SESS::$_Development = true;
SESS::$_D_ = $_gsMaster;
SESS::$_P_ = $_POST['pass'];
SESS::$_L_ = SESS::$_gsACCESO['LOGIN'];
if( SESS::$_gsACCESO['LOGEAR'] ) gsLogear('FW', 'S', '');
if( SESS::$_gsACCESO['ACCESO']>=1 && SESS::$_gsACCESO['Edit']>=1 ){
include(DIREDES."t/developer.js");
eContextPut('E:$t/development.js');
eContextPut('E:$t/create_css.php');
eContextPut('E:$t/create_css_ini.php');
}
if( SESS::$_D_=="~" && preg_match('/^localhost/u',$_SERVER['HTTP_HOST']) ){
if( SESS::$SessionMaxLife!=-1 ){
SETUP::$System['SessionMaxLife'] *= 2;
SESS::$SessionMaxLife = date("U")+SETUP::$System['SessionMaxLife'];
}
}
?>
S.script(top, '$t/developer.js');
<?PHP
$dimLanguage = "";
if( qCount("{$_ENV['eDesDictionary']}gs_language", "tf_translation='{$_ENV['ON']}'")>1 ){
$dimLanguage = "if(S('#arSTOOLS',top).length>0){S('#eIDIOMA','#arSTOOLS',top).text('".SESS::$_LANGUAGE_."'); S('#eIDIOMA','#arSTOOLS',top).block('table-cell');} top['_DimLanguage']=[['-Idioma']";
qQuery("select * from {$_ENV['eDesDictionary']}gs_language where tf_translation='{$_ENV['ON']}' order by nm_gs_language");
while($r=qArray()){
$dimLanguage .= ",['{$r['nm_gs_language']}','','{$r['cd_gs_language']}'";
if( $r['cd_gs_language']==SESS::$_LANGUAGE_ ){
$dimLanguage .= ",null,null,'font-weight:bold']";
}else{
$dimLanguage .= ",null,null,null]";
}
}
$dimLanguage .= "];";
}
echo $dimLanguage;
}else{
}
}
eEnd();